<template x-if="product">
    <div class="c-product-details tw-px-4">
        <div class="c-product-details__top">
            <div class="tw-pt-1.5 tw-text-neutrals-80 tw-leading-lg">
                <p><span x-text="`$${product.price}`"></span></p>
            </div>

            <h1 class="tw-mt-0.5 tw-text-heading-28 tw-text-primary tw-font-light tw-tracking-light tw-uppercase" x-text="product.title"></h1>
        </div>

        <div class="c-product-details__middle tw-mt-6">
            <div class="c-product-details__colors tw-mb-8">
                <div class="c-product-details__color-heading">
                    <span class="tw-inline-block tw-py-[6px] tw-text-neutrals-80 tw-leading-lg">Color</span>
                    <span class="tw-inline-block tw-pl-1 tw-text-black" x-text="product.color.name"></span>
                </div>

                {% include '../components/c_colors-select.twig' %}
            </div>

            <hr class="tw-my-6 tw-h-px tw-w-full tw-bg-neutrals-40">
            <div class="c-product-details__id tw-text-md tw-leading-md tw-text-neutrals-80 tw-uppercase">
                <p>Style No.<span x-text="product.id"></span></p>
            </div>
            <hr class="tw-my-6 tw-h-px tw-w-full tw-bg-neutrals-40">

            <div class="c-product-details__description">
                <div class="tw-text-lg tw-text-black" x-text="product.description"></div>
                {% include '../atoms/a_button.twig' with {
                    text: 'Read more below',
                    classes: ['tw-py-3 tw-text-lg tw-font-futura tw-text-primary tw-underline'],
                } %}
            </div>

            <div class="c-product-details__sizes" x-data="sizes()">
                <div class="c-product-details__sizes-heading tw-mt-2 tw-bg-neutrals-10 tw-py-2 tw-px-4">
                    {% include '../components/c_selected-sizes.twig' %}
                </div>

                {% include '../atoms/a_button.twig' with {
                    text: 'Choose size',
                    icons: ['i_arrow'],
                    classes: ['tw-w-full tw-flex tw-justify-between tw-items-center tw-border tw-border-solid tw-text-primary tw-uppercase tw-p-4 tw-mb-6 tw-text-md tw-font-medium tw-tracking-wide tw-text-primary'],
                    onclick: 'toggle()'
                } %}

                {% include '../scaffold/s_sizes.twig' %}
            </div>

            <div x-init="initAddToCartButtonVisibility()"
                 @scroll.window="checkAddToCartButtonVisibility"
                 @resize.window="checkAddToCartButtonVisibility">
                <div x-ref="addToCartBtn">
                    {% include '../atoms/a_button.twig' with {
                        xText: "`Add to cart - $${product.price}`",
                        classes: [
                            'tw-w-full',
                            'tw-bg-primary',
                            'tw-text-md',
                            'tw-font-normal',
                            'tw-tracking-wide',
                            'tw-leading-md',
                            'tw-uppercase',
                            'tw-border-0',
                            'tw-cursor-pointer',
                            'tw-text-white',
                            'tw-h-16',
                        ],
                        onclick: 'addToCart()'
                    } %}
                </div>
                <div 
                    x-show="!isAddToCartButtonVisible"
                    style="position:fixed; bottom:10px; left:0; right:0; z-index:100;"
                    class="tw-w-full tw-flex tw-justify-center tw-pointer-events-none tw-px-4"
                >
                    <div class="tw-w-full tw-pointer-events-auto">
                        {% include '../atoms/a_button.twig' with {
                            xText: "`Add to cart - $${product.price}`",
                            classes: [
                                'tw-w-full',
                                'tw-bg-primary',
                                'tw-text-md',
                                'tw-font-normal',
                                'tw-tracking-wide',
                                'tw-leading-md',
                                'tw-uppercase',
                                'tw-border-0',
                                'tw-cursor-pointer',
                                'tw-text-white',
                                'tw-h-16',
                            ],
                            onclick: 'addToCart()'
                        } %}
                    </div>
                </div>
            </div>
        </div>

        <div class="c-product-details__bottom">

        </div>
    </div>
</template>